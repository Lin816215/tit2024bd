<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>添加任务</title>
		<link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
		<link rel="stylesheet" href="../css/layuimini.css" media="all">
		<style>
			/* 为带有require类的元素添加红色星号前缀 */
			.required::before {
				/* 星号内容 */
				content: "*";
					/* 红色 */
				color: #ff0000;
				/* 与文字保持一点距离 */
				margin-right: 4px;
			/* 星号加粗 */
				font-weight: bold;				
			}
		</style>
	</head>
	<body>
		<div class="layui-form">
			<div class="layui-form-item">
				<label class="layui-form-label required">任务名称</label>
					<div class="layui-input-block">
						<input id="name" type="text" name="name" class="layui-input" lay-verify="required"
							lay-reqtext="任务名称不能为空!" placeholder="请输入任务名称">
					</div>
			</div>
			
			<div class="layui-form-item">
				<label class="layui-form-label required">任务类型</label>
				<div class="layui-input-block">
					<select lay-verify="required">
						<option value="1">日常任务</option>
						<option value="2">专项任务</option>
						<option value="3">紧急任务</option>
					</select>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label required">责任部门</label>
				<div class="layui-input-block">
					<select lay-verify="required">
						<option value="1">综合事务部</option>
						<option value="2">行政审批部</option>
						<option value="3">公共资源交易部</option>
						<option value="4">数据资源部</option>
						<option value="5">系统管理部</option>
						<option value="6">监督考核部</option>
					</select>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label required">责任人</label>
					<div class="layui-input-block">
						<input id="people" type="text" name="people" class="layui-input" lay-verify="required"
							lay-reqtext="责任人不能为空!" placeholder="请输入责任人姓名">
					</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label required">截止时间</label>
				<div class="layui-input-inline">
					<input id="time" type="text" name="time" placeholder="请选择会议时间" autocomplete="off"
						class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">任务描述</label>
				<div class="layui-input-block">
					<textarea name="description" class="layui-textarea" placeholder=""></textarea>
				</div>
			</div>
			<div class="layui-form-item">
					<div class="layui-input-block">
						<button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">确认保存</button>
					</div>
				</div><!-- 提交按钮结束 -->
			</div>
			
			<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
				<script>
					// 加载Layui中的form模块、layer模块
					layui.use(['form', 'layer'], function() {
						var form = layui.form; // 获得form模块
						var layer = layui.layer; // 获得layer模块
						$ = layui.$; // 获得jQuery中的$
					
					$("#name").blur(function() {
						// 取得用户名框中的值
						var name = $("#name").val();
						//正则表达式
						var reg = /^[\u4e00-\u9fa5]{2,6}$/; 
							if (!reg.test(name)) {
								layer.msg('负责人必须是2-6个汉字！', {icon: 2});
							}
					});
					});
					layui.use(['form'], function() {
							var form = layui.form;
							  layer = layui.layer;
							    $ = layui.$;
					
							//监听表单提交：确认保存按钮，提交按钮的lay-filter="saveBtn"
							form.on('submit(saveBtn)', function(data) {
								var index = layer.alert(JSON.stringify(data.field), {
									title: '最终的提交信息'
								}, function() {
									// 关闭弹出层
									layer.close(index);
					
									var iframeIndex = parent.layer.getFrameIndex(window.name);
									parent.layer.close(iframeIndex);
					
								});
								return false;
							});
						});	
					layui.use('laydate', function(){
								var laydate = layui.laydate;
								var initYear;
								laydate.render({
								  elem: '#time'
								});
							});
			</script>
	</body>
</html>